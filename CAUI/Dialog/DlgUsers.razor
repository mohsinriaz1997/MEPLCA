@using CA.API.Models
<MudDialog class="modal-settings">

    <DialogContent>
        @if (Loading)
        {
            <center><MudProgressCircular Color="Color.Primary" Size="Size.Large" Indeterminate="true" /></center>
        }
        @if (DialogFor == "Users")
        {
            <MudTable FixedHeader="true" HorizontalScrollbar="true" Height="350px" Dense="true" Bordered="true" Filter="new Func<MstUserProfile,bool>(FilterFunc1)" Loading="@Loading" LoadingProgressColor="Color.Primary" @ref="@_table" Items="UserProfileList" Hover="true" Striped="true" @bind-SelectedItem="oUserProfileModels" RowClassFunc="@SelectedRowClassFunc" OnRowClick="RowClickEvent" T="MstUserProfile">
                <ToolBarContent>
                    <MudText Typo="Typo.h6">Users</MudText>
                    <MudSpacer />
                    <MudTextField @bind-Value="searchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
                </ToolBarContent>
                <HeaderContent>
                    <MudTh><MudTableSortLabel SortBy="new Func<MstUserProfile, object>(x=>x.Id)">User ID</MudTableSortLabel></MudTh>
                    <MudTh><MudTableSortLabel SortBy="new Func<MstUserProfile, object>(x=>x.UserCode)">User Code</MudTableSortLabel></MudTh>
                    <MudTh><MudTableSortLabel SortBy="new Func<MstUserProfile, object>(x=>x.UserName)">User Name</MudTableSortLabel></MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>@context.Id</MudTd>
                    <MudTd>@context.UserCode</MudTd>
                    <MudTd>@context.UserName</MudTd>
                </RowTemplate>
                <PagerContent>
                    <MudPagination SelectedChanged="PageChanged" Count="@((_table.GetFilteredItemsCount() + _table.RowsPerPage - 1) / _table.RowsPerPage)" Class="pa-4" />
                </PagerContent>
                <PagerContent>
                    <MudTablePager />
                </PagerContent>
            </MudTable>
        }
        @if (DialogFor == "UsersCopy")
        {
            <MudTable MultiSelection="true" FixedHeader="true" HorizontalScrollbar="true" Height="350px" Dense="true" Bordered="true" Filter="new Func<MstUserProfile,bool>(FilterFunc1)" Loading="@Loading" LoadingProgressColor="Color.Primary" @ref="@_table" Items="UserProfileList" Hover="true" Striped="true" @bind-SelectedItems="selectedUsers" RowClassFunc="@SelectedRowClassFunc" OnRowClick="RowClickEvent" T="MstUserProfile">
                <ToolBarContent>
                    <MudText Typo="Typo.h6">Users</MudText>
                    <MudSpacer />
                    <MudTextField @bind-Value="searchString1" Placeholder="Search" Adornment="Adornment.Start" AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
                </ToolBarContent>
                <HeaderContent>
                    <MudTh><MudTableSortLabel SortBy="new Func<MstUserProfile, object>(x=>x.Id)">User ID</MudTableSortLabel></MudTh>
                    <MudTh><MudTableSortLabel SortBy="new Func<MstUserProfile, object>(x=>x.UserCode)">User Code</MudTableSortLabel></MudTh>
                </HeaderContent>
                <RowTemplate>
                    <MudTd>@context.Id</MudTd>
                    <MudTd>@context.UserCode</MudTd>
                </RowTemplate>
                <PagerContent>
                    <MudPagination SelectedChanged="PageChanged" Count="@((_table.GetFilteredItemsCount() + _table.RowsPerPage - 1) / _table.RowsPerPage)" Class="pa-4" />
                </PagerContent>
                <PagerContent>
                    <MudTablePager />
                </PagerContent>
            </MudTable>
        }
    </DialogContent>
    <DialogActions>
        <MudItem class="text-right custom-btn-design">
            <MudButton Variant="Variant.Filled" OnClick="Submit" StartIcon="@Icons.Filled.CheckCircle" Color="Color.Info" Size="Size.Small">Ok</MudButton>
            <MudButton Variant="Variant.Filled" OnClick="Cancel" StartIcon="@Icons.Filled.Cancel" Color="Color.Error">Cancel</MudButton>
        </MudItem>
    </DialogActions>
</MudDialog>
